# Terraform Assessment – Minimal Viable Product (MVP)

## 1. Introduction

This document describes the **Minimal Viable Product (MVP)** for the Terraform Assessment capability.

The objective of this MVP is to **assess Terraform code without deploying infrastructure** and provide a **clear, auditable PASS or FAIL decision** based on security, correctness, and governance checks.

The MVP focuses on **plan-time assessment only**, ensuring safety and compliance before any Terraform apply is performed.

---

## 2. MVP Objective

The primary goals of this MVP are:

* Validate Terraform code quality and correctness
* Identify security misconfigurations early
* Understand the impact of infrastructure changes
* Enforce governance policies before deployment
* Produce auditable and traceable assessment results

This MVP is designed to prove the **core assessment engine**, not to automate Terraform generation or deployment.

---

## 3. Scope of the MVP

### In Scope

* Manual Terraform code used as input
* Static security scanning
* Terraform validation and planning
* Policy enforcement at plan time
* Run-level audit trail (logs, reports, metadata)

### Out of Scope (Intentionally)

* Runtime cloud scanning (ScoutSuite)
* Auto-remediation or auto-fix
* Terraform code generation
* Multi-cloud support
* Dashboards or UI
* AI-based cleanup or normalization

These items are intentionally excluded to keep the MVP focused, stable, and easy to validate.

---

## 4. MVP Stages Included

The following stages are implemented as part of the MVP:

### Stage 0 – Init Workspace

* Creates a unique run ID
* Initializes folder structure for logs, reports, and metadata
* Stores basic run information for audit and traceability

**Output:**

* metadata.json

---

### Stage 2 – tfsec IaC Scan

* Scans Terraform code for security misconfigurations
* Identifies risks such as insecure configurations or bad practices
* Does not deploy any infrastructure

**Output:**

* tfsec.json
* tfsec.log

---

### Stage 5 – Terraform Format, Init, and Validate

* Ensures Terraform files are properly formatted
* Initializes providers and modules
* Validates Terraform syntax and configuration correctness

**Output:**

* validate_summary.json
* tf_validate.log

---

### Stage 6 – Terraform Plan

* Executes terraform plan to understand intended changes
* Converts plan output into JSON format
* No infrastructure is applied

**Output:**

* tfplan.bin
* tfplan.json
* tf_plan.log

---

### Stage 7 – OPA Policy Evaluation

* Evaluates terraform plan JSON using Open Policy Agent (OPA)
* Enforces governance policies at plan time
* Current policy blocks destructive actions such as deletes
* Produces a final PASS or FAIL decision

**Output:**

* opa_decision.json
* opa.log
* Final status in metadata.json

---

## 5. Pass / Fail Logic

* **POLICY_PASSED**

  * No destructive changes detected
  * All required stages executed successfully

* **POLICY_FAILED**

  * Terraform plan contains blocked actions (e.g., delete)

* **OPA_FAILED**

  * Policy engine execution failure

This logic ensures unsafe changes are identified **before apply**.

---

## 6. Run Structure and Auditability

Each execution creates a unique folder under the `runs/` directory.

Each run contains:

* Logs for every executed stage
* Reports generated by tools
* Metadata with final decision and status

This design provides:

* Full audit trail
* Traceability of decisions
* Easy debugging and review

---

## 7. Why Manual Terraform Was Used

For the MVP:

* Terraform files were written manually
* The focus was on validating the **assessment pipeline**, not Terraform creation

Terraform generation, repo-based inputs, and automation are planned for future phases.

---

## 8. MVP Completion Status

The MVP is considered **complete** because:

* End-to-end assessment flow is functional
* Security, validation, planning, and policy enforcement are working
* PASS and FAIL scenarios are demonstrated
* Outputs are auditable and reproducible

---

## 9. Next Phase (Post-MVP)

After MVP approval, the next phase can include:

* Runtime cloud posture scanning (ScoutSuite)
* CI/CD integration and artifact publishing
* Additional OPA policy packs
* Enhanced reporting and summaries
* Optional UI or dashboard

---

## 10. Conclusion

This MVP successfully establishes a **foundation for Terraform assessment** by enforcing security and governance at plan time.

It provides a safe, auditable, and extensible base on which advanced capabilities can be built in subsequent phases.
